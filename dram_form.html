<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DRAMA FORMU</title>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
    
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- VELVET CINEMA STYLE (Aynen Korundu) --- */
        body { margin: 0; padding: 40px 20px; font-family: 'Poppins', sans-serif; color: #e0e0e0; display: flex; justify-content: center; align-items: center; min-height: 100vh; background: linear-gradient(135deg, #1a0b0b 0%, #4a0e0e 50%, #000000 100%); background-attachment: fixed; }
        .drama-card { width: 100%; max-width: 700px; background: rgba(20, 10, 10, 0.6); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 20px; padding: 60px 50px; box-shadow: 0 25px 50px rgba(0,0,0,0.5); position: relative; overflow: hidden; }
        .drama-card::before { content: ""; position: absolute; top: 0; left: 0; width: 100%; height: 3px; background: linear-gradient(90deg, transparent, #d4af37, transparent); }
        .header { text-align: center; margin-bottom: 50px; }
        h1 { font-family: 'Playfair Display', serif; font-size: 3em; margin: 0; color: #fff; letter-spacing: 1px; text-shadow: 0 2px 10px rgba(0,0,0,0.5); }
        .sub-title { font-size: 0.9em; color: #d4af37; text-transform: uppercase; letter-spacing: 3px; margin-top: 5px; font-weight: 600; }
        .form-group { margin-bottom: 35px; }
        label { display: block; font-family: 'Playfair Display', serif; font-size: 1.2em; color: #ffcccc; margin-bottom: 10px; letter-spacing: 0.5px; }
        .helper { font-size: 0.85em; color: #999; margin-bottom: 12px; display: block; font-style: italic; }
        input[type="text"], textarea, select { width: 100%; background: rgba(255, 255, 255, 0.05); border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 10px; padding: 15px; color: #fff; font-family: 'Poppins', sans-serif; font-size: 1em; transition: 0.3s; box-sizing: border-box; }
        input:focus, textarea:focus, select:focus { outline: none; background: rgba(255, 255, 255, 0.1); border-color: #d4af37; box-shadow: 0 0 15px rgba(212, 175, 55, 0.1); }
        select option { background: #1a0b0b; color: #fff; }
        #other-film-div { display: none; margin-top: 15px; }
        .slider-wrapper { display: flex; align-items: center; gap: 20px; padding: 10px 0; }
        input[type="range"] { flex-grow: 1; height: 2px; background: rgba(255,255,255,0.2); accent-color: #d4af37; cursor: pointer; }
        .score-display { font-family: 'Playfair Display', serif; font-size: 2em; color: #d4af37; min-width: 40px; text-align: right; }
        .submit-btn { width: 100%; padding: 20px; margin-top: 30px; background: transparent; color: #d4af37; border: 1px solid #d4af37; font-family: 'Poppins', sans-serif; font-weight: 600; font-size: 1.1em; text-transform: uppercase; letter-spacing: 2px; border-radius: 50px; cursor: pointer; transition: 0.4s; }
        .submit-btn:hover { background: #d4af37; color: #1a0b0b; box-shadow: 0 0 20px rgba(212, 175, 55, 0.4); }
        .footer { margin-top: 50px; text-align: center; font-size: 0.8em; color: #666; }
        .footer a { color: #888; text-decoration: none; border-bottom: 1px dotted #888; }
    </style>
</head>
<body>

    <div class="drama-card">
        <div class="header">
            <h1>DRAMA FORMU</h1>
            <div class="sub-title">SİNEMATİK ANALİZ</div>
            
            <div style="margin-top: 25px; font-family: 'Playfair Display', serif; line-height: 1.6;">
                <div style="font-style: italic; color: #e0e0e0; font-size: 1em;">
                    "Man is least himself when he talks in his own person.<br>
                    Give him a mask, and he will tell you the truth."
                </div>
                <div style="margin-top: 8px; font-style: italic; color: #a0a0a0; font-size: 0.85em;">
                    (İnsan kendi adına konuştuğunda en az kendisidir.<br>
                    Ona bir maske verin, size gerçeği söyleyecektir.)
                </div>
                <div style="margin-top:8px; color: #d4af37; font-size: 0.85em; letter-spacing: 1px; font-style: normal;">— Oscar Wilde</div>
            </div>
        </div>

        <form id="drama-form">
            <input type="hidden" name="form_turu" value="DRAM RAPORU">
            <input type="hidden" name="sent_time" id="sent_time">
            
            <div class="form-group">
                <label>İncelenen Eser (Film)</label>
                <select id="film_adi" name="film_adi" onchange="toggleOtherFilm()">
                    <option value="" disabled selected>Listeden seçiniz...</option>
                    <option value="Les Choristes">Koro (Les Choristes)</option>
                    <option value="Rain Man">Yağmur Adam (Rain Man)</option>
                    <option value="Good Will Hunting">Can Dostum (Good Will Hunting)</option>
                    <option value="A Beautiful Mind">Akıl Oyunları (A Beautiful Mind)</option>
                    <option value="Freedom Writers">Özgürlük Yazarları</option>
                    <option value="Coach Carter">Koç Carter</option>
                    <option value="Karpuz Kabugu">Karpuz Kabuğundan Gemiler Yapmak</option>
                    <option value="Scent of a Woman">Kadın Kokusu</option>
                    <option value="Die Welle">Tehlikeli Oyun (Die Welle)</option>
                    <option value="Ekim Dusu">Ekim Düşü (October Sky)</option>
                    <option value="Sitaare Zameen Par">Sitaare Zameen Par</option>
                    <option value="Dangal">Dangal</option>
                    <option value="The Boy Who Harnessed the Wind">Rüzgarı Dizginleyen Çocuk</option>
                    <option value="Diger">Diğer / Manuel Giriş</option>
                </select>
                <div id="other-film-div">
                    <input type="text" id="custom_film_name" name="custom_film_name" placeholder="Eser adını giriniz...">
                </div>
            </div>

            <div class="form-group">
                <label>Eleştirmen (Öğrenci Adı)</label>
                <input type="text" id="student_name" name="student_name" placeholder="Adınız Soyadınız" required>
            </div>

            <div class="form-group">
                <label>1. Hikaye Çerçevesi (Özet)</label>
                <span class="helper">Olayların merkezinde ne var? Genel kompozisyonu anlat.</span>
                <input type="hidden" name="q1_label" value="1. HİKAYE ÇERÇEVESİ (ÖZET)">
                <textarea name="q1_answer" rows="3" placeholder="Gözlemlerini yaz..." required></textarea>
            </div>

            <div class="form-group">
                <label>2. Karakter Derinliği (Portre ve Çatışma)</label>
                <span class="helper">Ana karakter kimdir, neyle savaşıyor? Maskesinin ardında ne var?</span>
                <input type="hidden" name="q2_label" value="2. KARAKTER DERİNLİĞİ (PORTRE VE ÇATIŞMA)">
                <textarea name="q2_answer" rows="3" placeholder="Analiz et..." required></textarea>
            </div>

            <div class="form-group">
                <label>3. En Net An (Kırılma Noktası)</label>
                <span class="helper">Her şeyin değiştiği, flu görüntünün netleştiği o sahne.</span>
                <input type="hidden" name="q3_label" value="3. EN NET AN (KIRILMA NOKTASI)">
                <textarea name="q3_answer" rows="3" placeholder="O anı anlat..." required></textarea>
            </div>

            <div class="form-group">
                <label>4. Büyük Resim (Felsefe / Mesaj)</label>
                <span class="helper">Bu hikaye bittiğinde elimizde kalan duygu veya ders nedir?</span>
                <input type="hidden" name="q4_label" value="4. BÜYÜK RESİM (FELSEFE / MESAJ)">
                <textarea name="q4_answer" rows="3" placeholder="Ana fikir..." required></textarea>
            </div>

            <div class="form-group">
                <label>5. Yansıma (Kişisel Bağ)</label>
                <span class="helper">Bu hikayede kendi hayatından bir parça gördün mü?</span>
                <input type="hidden" name="q5_label" value="5. YANSIMA (KİŞİSEL BAĞ)">
                <textarea name="q5_answer" rows="3" placeholder="Senin düşüncelerin..." required></textarea>
            </div>

            <div class="form-group">
                <label>6. Ses Kaydı (Replik)</label>
                <input type="hidden" name="q6_label" value="6. SES KAYDI (REPLİK)">
                <input type="text" name="q6_answer" placeholder='"Unutulmaz bir cümle..."'>
            </div>

            <div class="form-group">
                <label>7. Etki Derinliği (Puan)</label>
                <input type="hidden" name="q7_label" value="7. ETKİ DERİNLİĞİ (PUAN)">
                <div class="slider-wrapper">
                    <span style="font-size:0.8em; opacity:0.5;">I</span>
                    <input type="range" name="rating" min="1" max="10" value="8" oninput="document.getElementById('score-val').innerText = this.value">
                    <span style="font-size:0.8em; opacity:0.5;">X</span>
                    <div class="score-display" id="score-val">8</div>
                </div>
            </div>

            <button type="submit" class="submit-btn">Analizi Kaydet</button>

            <div class="footer">
                Boğaziçi Koleji Film Platformu &bull; <a href="index.html">Çıkış</a>
            </div>
        </form>
    </div>

    <script>
        function toggleOtherFilm() {
            var selectBox = document.getElementById("film_adi");
            var otherDiv = document.getElementById("other-film-div");
            var otherInput = document.getElementById("custom_film_name");
            if (selectBox.value === "Diger") {
                otherDiv.style.display = "block"; otherInput.required = true; otherInput.focus();
            } else {
                otherDiv.style.display = "none"; otherInput.required = false; otherInput.value = "";
            }
        }

        document.getElementById('drama-form').addEventListener('submit', function(event) {
            event.preventDefault(); 
            const btn = document.querySelector('.submit-btn');
            const originalText = btn.innerText;

            // Tarih damgası
            document.getElementById('sent_time').value = new Date().toLocaleString();

            // --- API KODLARINI BURAYA YAPIŞTIR ---
            const serviceID = "service_dr4528a";  // Senin Service ID'n
            const templateID = "template_xxxxxxx"; // *** SÜPER ŞABLON ID'Sİ BURAYA GELECEK! ***
            const publicKey = "lFEHmXKnlgaCdot_t"; // Senin Public Key'in
            // -------------------------------------

            /* DİKKAT: 'template_xxxxxxx' kısmına, EmailJS'de oluşturduğun yeni
               SÜPER ŞABLONUN ID'sini yapıştırmayı unutma! */

            btn.innerText = "Gönderiliyor...";
            btn.style.opacity = "0.7";
            btn.disabled = true;

            emailjs.sendForm(serviceID, templateID, this, publicKey)
                .then(function() {
                    alert("DRAM ANALİZİ BAŞARIYLA İLETİLDİ.");
                    btn.innerText = "KAYDEDİLDİ ✓";
                    btn.style.backgroundColor = "#d4af37";
                    btn.style.color = "#000";
                    
                    setTimeout(() => { 
                        btn.innerText = originalText; 
                        btn.style.backgroundColor = "transparent";
                        btn.style.color = "#d4af37";
                        btn.disabled = false;
                    }, 3000);
                    document.getElementById("drama-form").reset();
                    toggleOtherFilm(); 
                }, function(error) {
                    alert("Bağlantı Hatası.");
                    console.log(error);
                    btn.innerText = originalText; 
                    btn.style.opacity = "1";
                    btn.disabled = false;
                });
        });
    </script>
</body>
</html>